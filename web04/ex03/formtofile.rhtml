<!DOCTYPE html>
<html lang="en">
<head>
    <style>
    .form_ruby{
        color: blue;
        display: block;
        margin: auto;
        vertical-align: middle;
    }
    .container {
            display: flex;
            flex-direction: column;
            align-content: center;
            height: 300px;
         }
    </style>
</head>
<body>
    <div class="container">
        <form action="" class="form_ruby">
            <label for="fname">Nombre del archivo:</label><br>
            <input type="text" id="filename" name="filename" value=""><br>
            <label for="fname">Nombre:</label><br>
            <input type="text" id="fname" name="fname" value=""><br>
            <label for="lname">Apellido:</label><br>
            <input type="text" id="lname" name="lname" value=""><br>
            <label for="lname">Linea a modificar:</label><br>
            <input type="text" id="line" name="line" value=""><br><br>
            <button type=submit>Validar</button>
        </form> 
                  
            <%=
                filename = servlet_request.query["filename"]
                lname = servlet_request.query["lname"]
                fname = servlet_request.query["fname"]
                content = "#{lname}, #{fname}"
                line = servlet_request.query["line"].to_i
                if fname and fname != ""
                    str = []
                    File.open("/Users/javrodri/discovery_piscine_ruby/web04/ex03/#{filename}", "r").each_line {|content| str << content}
                    str[line - 1] = content
                    File.open("/Users/javrodri/discovery_piscine_ruby/web04/ex03/#{filename}", "w") do |f|
				        f.puts(str)
                    end
                end
            %>
    </div>
</body>
</html>